<!DOCTYPE html>
<html>
<head>
    <title>API 테스트</title>
</head>
<body>
    <h1>API 테스트 페이지</h1>
    <button onclick="testAPI()">API 테스트</button>
    <div id="result"></div>
    
    <script>
        async function testAPI() {
            console.log('테스트 시작...');
            document.getElementById('result').innerHTML = '테스트 중...';
            
            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        topic: '테스트 주제',
                        audience: '일반인',
                        tone: '친근한',
                        aiModel: 'auto',
                        enablePhase1: true,
                        enableSEO: false
                    })
                });
                
                console.log('응답 받음:', response.status, response.statusText);
                
                if (!response.ok) {
                    throw new Error(`API 오류: ${response.status}`);
                }
                
                const responseText = await response.text();
                console.log('응답 텍스트 길이:', responseText.length);
                console.log('첫 200자:', responseText.substring(0, 200));
                
                const result = JSON.parse(responseText);
                console.log('JSON 파싱 성공:', result.title);
                
                document.getElementById('result').innerHTML = `
                    <h3>성공!</h3>
                    <p>제목: ${result.title}</p>
                    <p>모델: ${result.model}</p>
                    <p>점수: ${result.metadata.qualityScore}</p>
                `;
                
            } catch (error) {
                console.error('오류:', error);
                document.getElementById('result').innerHTML = `
                    <h3>오류 발생</h3>
                    <p>${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>